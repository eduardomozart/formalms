<div class="page-header">
    <h1>{{ translate('menu_course', '_STORAGE') }}</h1>
</div>

<div class="std_block">
    <div class="tabs-wrapper">
        <ul class="nav nav-tabs">
            {% for tab in tabs %}
                <li role="presentation" class="tab-link {{ tab.active ? 'active' : '' }}" data-alias="{{ tab.alias }}"><a href="#{{ tab.alias }}">{{ tab.title }}</a></li>
            {% endfor %}
        </ul>

        <div class="tab-content">
            {% for tab in tabs %}
                {% include 'container.html.twig' with { tab: tab } %}
            {% endfor %}
        </div>
    </div>
</div>

<script>
const tabs = document.querySelectorAll('.tab-link');
if (tabs) {
    tabs.forEach((tab) => {
        tab.addEventListener('click', clickOnTab);

        new window.FolderTree(tab.getAttribute('data-alias'));
        new window.FolderView();
    });
}

function clickOnTab(event) {
    const target = event.target;
    const el = target.closest('.tab-link');
    const linkAlias = el.getAttribute('data-alias');
    const tabs = document.querySelectorAll('.tab-link');
    const tab = target.closest('.tab-link');
    const oldTabContainer = document.querySelector('.tab-content > .active');
    const tabContainer = document.querySelector('.tab-content > .tab-pane[data-alias=' + linkAlias + ']');

    if (tabs) {
        tabs.forEach((tab) => {
            tab.classList.remove('active');
        });
    }
    if (tab) {
        tab.classList.add('active');
    }

    if (oldTabContainer) {
        oldTabContainer.classList.remove('active');
    }
    if (tabContainer) {
        tabContainer.classList.add('active');
    }
}
</script>